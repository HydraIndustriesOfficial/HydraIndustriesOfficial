{"ast":null,"code":"import _toConsumableArray from\"/Users/kbookout/escrow-hardhat/app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/kbookout/escrow-hardhat/app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/kbookout/escrow-hardhat/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"/Users/kbookout/escrow-hardhat/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/kbookout/escrow-hardhat/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{ethers}from'ethers';import{useEffect,useState}from'react';import deploy from'./deploy';import Escrow from'./Escrow';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var provider=new ethers.providers.Web3Provider(window.ethereum);export function approve(_x,_x2){return _approve.apply(this,arguments);}function _approve(){_approve=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(escrowContract,signer){var approveTxn;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return escrowContract.connect(signer).approve();case 2:approveTxn=_context4.sent;_context4.next=5;return approveTxn.wait();case 5:case\"end\":return _context4.stop();}},_callee4);}));return _approve.apply(this,arguments);}function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),escrows=_useState2[0],setEscrows=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),account=_useState4[0],setAccount=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),signer=_useState6[0],setSigner=_useState6[1];useEffect(function(){function getAccounts(){return _getAccounts.apply(this,arguments);}function _getAccounts(){_getAccounts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accounts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return provider.send('eth_requestAccounts',[]);case 2:accounts=_context.sent;setAccount(accounts[0]);setSigner(provider.getSigner());case 5:case\"end\":return _context.stop();}},_callee);}));return _getAccounts.apply(this,arguments);}getAccounts();},[account]);function newContract(){return _newContract.apply(this,arguments);}function _newContract(){_newContract=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var beneficiary,arbiter,value,escrowContract,escrow;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:beneficiary=document.getElementById('beneficiary').value;arbiter=document.getElementById('arbiter').value;value=ethers.BigNumber.from(document.getElementById('wei').value);_context3.next=5;return deploy(signer,arbiter,beneficiary,value);case 5:escrowContract=_context3.sent;escrow={address:escrowContract.address,arbiter:arbiter,beneficiary:beneficiary,value:value.toString(),handleApprove:function(){var _handleApprove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:escrowContract.on('Approved',function(){document.getElementById(escrowContract.address).className='complete';document.getElementById(escrowContract.address).innerText=\"✓ It's been approved!\";});_context2.next=3;return approve(escrowContract,signer);case 3:case\"end\":return _context2.stop();}},_callee2);}));function handleApprove(){return _handleApprove.apply(this,arguments);}return handleApprove;}()};setEscrows([].concat(_toConsumableArray(escrows),[escrow]));case 8:case\"end\":return _context3.stop();}},_callee3);}));return _newContract.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"contract\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\" New Contract \"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Arbiter Address\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"arbiter\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Beneficiary Address\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"beneficiary\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Deposit Amount (in Wei)\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"wei\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button\",id:\"deploy\",onClick:function onClick(e){e.preventDefault();newContract();},children:\"Deploy\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"existing-contracts\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Existing Contracts \"}),/*#__PURE__*/_jsx(\"div\",{id:\"container\",children:escrows.map(function(escrow){return/*#__PURE__*/_jsx(Escrow,_objectSpread({},escrow),escrow.address);})})]})]});}export default App;","map":{"version":3,"names":["ethers","useEffect","useState","deploy","Escrow","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","provider","providers","Web3Provider","window","ethereum","approve","_x","_x2","_approve","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee4","escrowContract","signer","approveTxn","wrap","_callee4$","_context4","prev","next","connect","sent","wait","stop","App","_useState","_useState2","_slicedToArray","escrows","setEscrows","_useState3","_useState4","account","setAccount","_useState5","_useState6","setSigner","getAccounts","_getAccounts","_callee","accounts","_callee$","_context","send","getSigner","newContract","_newContract","_callee3","beneficiary","arbiter","value","escrow","_callee3$","_context3","document","getElementById","BigNumber","from","address","toString","handleApprove","_handleApprove","_callee2","_callee2$","_context2","on","className","innerText","concat","_toConsumableArray","children","type","id","onClick","e","preventDefault","map","_objectSpread"],"sources":["/Users/kbookout/escrow-hardhat/app/src/App.js"],"sourcesContent":["import { ethers } from 'ethers';\nimport { useEffect, useState } from 'react';\nimport deploy from './deploy';\nimport Escrow from './Escrow';\n\nconst provider = new ethers.providers.Web3Provider(window.ethereum);\n\nexport async function approve(escrowContract, signer) {\n  const approveTxn = await escrowContract.connect(signer).approve();\n  await approveTxn.wait();\n}\n\nfunction App() {\n  const [escrows, setEscrows] = useState([]);\n  const [account, setAccount] = useState();\n  const [signer, setSigner] = useState();\n\n  useEffect(() => {\n    async function getAccounts() {\n      const accounts = await provider.send('eth_requestAccounts', []);\n\n      setAccount(accounts[0]);\n      setSigner(provider.getSigner());\n    }\n\n    getAccounts();\n  }, [account]);\n\n  async function newContract() {\n    const beneficiary = document.getElementById('beneficiary').value;\n    const arbiter = document.getElementById('arbiter').value;\n    const value = ethers.BigNumber.from(document.getElementById('wei').value);\n    const escrowContract = await deploy(signer, arbiter, beneficiary, value);\n\n\n    const escrow = {\n      address: escrowContract.address,\n      arbiter,\n      beneficiary,\n      value: value.toString(),\n      handleApprove: async () => {\n        escrowContract.on('Approved', () => {\n          document.getElementById(escrowContract.address).className =\n            'complete';\n          document.getElementById(escrowContract.address).innerText =\n            \"✓ It's been approved!\";\n        });\n\n        await approve(escrowContract, signer);\n      },\n    };\n\n    setEscrows([...escrows, escrow]);\n  }\n\n  return (\n    <>\n      <div className=\"contract\">\n        <h1> New Contract </h1>\n        <label>\n          Arbiter Address\n          <input type=\"text\" id=\"arbiter\" />\n        </label>\n\n        <label>\n          Beneficiary Address\n          <input type=\"text\" id=\"beneficiary\" />\n        </label>\n\n        <label>\n          Deposit Amount (in Wei)\n          <input type=\"text\" id=\"wei\" />\n        </label>\n\n        <div\n          className=\"button\"\n          id=\"deploy\"\n          onClick={(e) => {\n            e.preventDefault();\n\n            newContract();\n          }}\n        >\n          Deploy\n        </div>\n      </div>\n\n      <div className=\"existing-contracts\">\n        <h1> Existing Contracts </h1>\n\n        <div id=\"container\">\n          {escrows.map((escrow) => {\n            return <Escrow key={escrow.address} {...escrow} />;\n          })}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}